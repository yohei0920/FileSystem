# ファイルシステム

## ファイルシステムについて

ファイルシステムは、コンピュータに保存されているファイルとディレクトリの関係を維持し、表現する方法です。ファイルシステムには、ディレクトリをナビゲートしたり、新しいファイルを作成したり、ディレクトリ間でファイルを移動したりするようなファイルの基本的な操作を実行するためのツールが含まれています。



## 用語

- ルート：ファイルシステムの階層構造において、最上位に位置するノードのことです。ルートの配下には、他のノードやファイルが含まれます。また、ルートは他のノードには含まれません。

- ノード：ファイルシステムの階層構造における個々の要素を指します。ノードは階層的な関係を持ち、他のノードと接続されることがあります。

- 親ノード：あるノードの直上にあるノードを指します。親ノードはその配下に配置される子ノードを持つことがあります。

- 子ノード：あるノードの直下の階層にあるノードを指します。子ノードは、親ノードから派生しており、さらに他のノードを持つことがあります。

- 兄弟ノード：共通の親ノードを持ち、階層が同じノードを指します。

- 葉ノード：ファイルシステムの階層構造において、子ノードを持たないノードを指します。葉ノードは末端のノードであり、通常は空のディレクトリやファイルを表します。葉ノードは、その下にさらにノードが存在しないため、階層構造の最下層に位置します。



## クラス

### UniversalFileSystem

クラス名: UniversalFileSystem

概要:
UniversalFileSystemクラスは、ファイルシステムの操作を一元管理し、ユーザーからの入力に応じた処理を行うための制御クラスです。ユーザーからの入力を解析し、各コマンドのバリデーションを制御し、適切なファイルシステムの操作を呼び出します。また、結果の表示にも関与し、ファイルシステム全体の処理を簡潔に制御します。

役割:
- ファイルシステム全体の処理を制御するクラスです。
- ユーザーからの入力を受け取り、解析してファイルシステムの操作やバリデーションを行います。
- ファイルシステムクラスのインスタンスを作成し、操作に必要なメソッドやデータにアクセスします。
- ユーザーの入力コマンドに基づいて、適切なファイルシステムの操作を呼び出す役割も担います。

主なメソッド:
- commandLineParser: 入力文字列を解析してトークンに分割します。
- inputStringValidator: 入力文字列の引数のバリデーションをチェックします。
- tokenValidator: 解析されたトークンに基づいて各コマンドのバリデーションを制御します。
- pathToValidatorResponse: ファイルやディレクトリの存在チェックを行います。
- fileOrDirNameToValidatorResponse: ファイル名やディレクトリ名のバリデーションを行います。
- checkNodeTypeValidator: ファイルやディレクトリのタイプを確認し、操作の正当性を検証します。
- createNodePathToValidatorResponse: ファイルやディレクトリの作成時のバリデーションを行います。
- parsedStringTokenHandler: 解析されたトークンに基づいてファイルシステムの操作を実行します。
- appendParagraph: 結果を表示するためのHTML要素にパラグラフを追加します。
- appendResultParagraph: 結果やエラーメッセージを表示するためのHTML要素に結果パラグラフを追加します。

### FileSystem

クラス名: FileSystem

概要:
FileSystemクラスは、ファイルシステムの操作と管理を行うためのクラスです。各種ファイルシステム操作のメソッドを提供し、ファイルやディレクトリの作成、削除、移動、コンテンツの取得や設定などの操作を実行します。また、パスの解析や存在チェックなども行い、ファイルシステム全体の状態を管理します。クラス内にはルートディレクトリやカレントディレクトリの情報が保持され、操作対象のファイルやディレクトリを正確に取得します。さまざまなファイルシステム操作を提供し、ファイルシステムの正常な動作を実現します。

役割:
- ファイルシステムの操作と管理を行うクラスです。
- ファイルやディレクトリの作成、削除、移動、コンテンツの取得や設定などの操作を提供します。
- ファイルやディレクトリの存在チェックやパスの解析なども担当します。

主なメソッド:
getValidCommands: 有効なコマンドのリストを返します。
- ls: 指定されたパスのファイルやディレクトリの一覧を取得します。
- touch: 指定されたパスに新しいファイルを作成します。既に存在する場合は更新日時を更新します。
- mkdir: 指定されたパスに新しいディレクトリを作成します。
- cd: 指定されたパスのディレクトリに移動します。
- pwd: 現在の作業ディレクトリのフルパスを取得します。
- rm: 指定されたパスのファイルまたはディレクトリを削除します。
- print: 指定されたパスのファイルのコンテンツを取得します。
- setContent: 指定されたパスのファイルのコンテンツを設定します。
- pathTokenArray: パスをトークンに分割します。
- hasFileOrDir: 指定されたパスにファイルやディレクトリが存在するかを確認します。
- getFileOrDirByStringPath: 指定されたパスに対応するファイルやディレクトリのインスタンスを取得します。
- getDirPathAndFileName: パスをディレクトリとファイル名の配列に分割します。

### Node

クラス名: Node

概要:
Nodeクラスは、ファイルやディレクトリを表すノードを管理するためのクラスです。各種ノード操作のメソッドを提供し、ノードの作成、削除、コンテンツの取得や設定などの操作を実行します。ノードは階層構造を持ち、親子関係や兄弟関係を持つことができます。クラス内にはノードの名前、タイプ、親ノードへの参照、子ノードへの参照などの情報が保持されます。また、ノードの更新日時やコンテンツの管理も行います。さまざまなノード操作を提供し、ファイルやディレクトリの正確な管理を実現します。

役割:
- ファイルやディレクトリを表すノードを管理するクラスです。
- ファイルやディレクトリの作成、削除、コンテンツの取得や設定などの操作を提供します。
- ファイルシステム内の階層構造を表現するために、親子関係や兄弟関係を持ちます。

主なメソッド:
- isRoot: ノードがルートノードかどうかを判定します。
- isFile: ノードのタイプがファイルかどうかを判定します。
- isDir: ノードのタイプがディレクトリかどうかを判定します。
- hasChildren: ノードが子ノードを持つかどうかを判定します。
- hasImmediateChildWithName: 指定された名前の直接の子ノードを持つかどうかを判定します。
- getChild: 指定された名前の子ノードを取得します。
- getContent: ノードのコンテンツを取得します。
- getName: ノードの名前を取得します。
- getType: ノードのタイプを取得します。
- getParent: ノードの親ノードを取得します。
- getChildTail: ノードの末端の子ノードを取得します。
- getDateModifiedAsString: ノードの更新日時を文字列として取得します。
- getFileListingAsString: ファイルの表示用文字列を取得します。
- setDateModifiedToCurrentDate: ノードの更新日時を現在の日時に設定します。
- setName: ノードの名前を変更します。
- setContent: ノードのコンテンツを変更します。
- addChild: 子ノードを追加します。
- removeChildByName: 指定された名前の子ノードを削除します。
- getListsOfChildren: 全ての子ノードの表示用文字列のリストを取得します。
- getFullPath: ルートディレクトリからの絶対パスを取得します。

### ValidatorResponse

クラス名: ValidatorResponse

概要:
ValidatorResponseクラスは、バリデーション結果を表すためのクラスです。isValidプロパティはバリデーションの成否を示し、trueならバリデーションが成功したことを、falseならバリデーションが失敗したことを示します。errorMessageプロパティはバリデーションが失敗した場合のエラーメッセージを保持します。バリデーション結果の取得やエラーメッセージの取得を行うためのメソッドが提供されています。このクラスを使用することで、バリデーション結果を簡潔に表現し、エラーメッセージの管理を効率的に行うことができます。

役割:
- バリデーション結果を表すクラスです。
- バリデーションが成功したかどうかとエラーメッセージを管理します。

主なメソッド:
- getIsValid: バリデーション結果が成功かどうかを取得します。
- getErrorMessage: エラーメッセージを取得します。



## 使用可能コマンド一覧(コマンド名 [引数]: 操作内容)

- touch [fileName]: 名前をつけて新しいファイルを作成します。

- mkdir [dirName]: 名前をつけて新しいディレクトリを作成します。

- print [fileName]: ファイルの内容を出力します。

- pwd: 現在の作業ディレクトリのパスを出力します。

- ls [fileOrDirName]: ディレクトリに含まれるファイルのファイルの情報のリストを表示、または単一ファイルの情報を出力します。

- setContent [fileName] [content]: 与えられたファイル名の内容を新しい内容に書き換えます。

- rm [fileOrDirName]: 与えられたファイル、またはディレクトリを取り除きます。

- cd [dirName]: 現在の作業ディレクトリを指定されたものに変更します。

- help [commandName]: コマンドのヘルプが表示されます。



## サンプルシナリオ

手順
~~~~~~~~~
1. pwd #=> 特になし

2. touch sampleFile #=> sampleFileファイルが作成されます。

3. mkdir sampleDir #=> sampleDirディレクトリが作成されます。

4. ls #=> sampleFile, sampleDirの2つが表示されます。

5. print sampleFile #=> 特になし

6. setContent sampleFile サンプル用の詳細が表示されます。

7. print sampleFile #=> 「サンプル用の詳細が表示されます。」という文言が表示されます

8. cd sampleDir #=> sampleDirに移動します。

9. mkdir sampleDir2 #=> sampleDir2ディレクトリが作成されます。

10. mkdir sampleDir3 #=> sampleDir3ディレクトリが作成されます。

11. cd sampleDir2 #=> sampleDir2に移動します。

12. mkdir sampleDir4 #=> sampleDir4が作成されます。

13 touch sampleFile2 #=> sampleFile2が作成されます。

14. pwd #=> /sampleDir/sampleDir2/

15. ls #=> sampleDir4, sampleFile2が表示されます。

16. rm sampleFile2 #=> sampleFile2が削除されます。

17. ls #=> sampleDir4が表示されます。

18. cd .. #=> /sampleDir/に移動します。

19. pwd #=> /sampleDir/

20. cd .. #=> ホームディレクトリに移動します。
~~~~~~~~~